

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Network Teaming &amp; Bridge &mdash; Sipa Linux Admin Class latest documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Sipa Linux Admin Class latest documentation" href="index.html"/>
        <link rel="next" title="Linux LVM partition" href="lvm.html"/>
        <link rel="prev" title="OpenVswitch Bridge" href="ovs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Sipa Linux Admin Class
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="systemd.html">Understand systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="journal.html">Journalclt</a></li>
<li class="toctree-l1"><a class="reference internal" href="configip.html">Configure IP address</a></li>
<li class="toctree-l1"><a class="reference internal" href="firewall.html">Understand New Linux Firewall</a></li>
<li class="toctree-l1"><a class="reference internal" href="sshd.html">SSH Server On CentOS7</a></li>
<li class="toctree-l1"><a class="reference internal" href="setupvm.html">SetupVM for Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">Build Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="bridgekvm.html">Bridge Networking KVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="ovs.html">OpenVswitch Bridge</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Network Teaming &amp; Bridge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#teaming">Teaming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vagrant">vagrant</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vagrant-accesss">vagrant accesss</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config-team">Config Team</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#config">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#activate-team">Activate Team</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lvm.html">Linux LVM partition</a></li>
<li class="toctree-l1"><a class="reference internal" href="iscsi.html">ISCSI Remote Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualdev.html">Network Virtualization Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="packstack.html">Openstack with Packstack</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstack-intro.html">Openstack intro Mitaka Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Lab Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="keystone.html">Install keystone</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Sipa Linux Admin Class</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Network Teaming &amp; Bridge</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/team.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="network-teaming-bridge">
<h1>Network Teaming &amp; Bridge<a class="headerlink" href="#network-teaming-bridge" title="Permalink to this headline">¶</a></h1>
<div class="section" id="teaming">
<h2>Teaming<a class="headerlink" href="#teaming" title="Permalink to this headline">¶</a></h2>
<img alt="_images/team001.png" src="_images/team001.png" />
<div class="section" id="vagrant">
<h3>vagrant<a class="headerlink" href="#vagrant" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="n">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="n">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;centos/7&quot;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="p">:</span><span class="n">server1</span> <span class="n">do</span> <span class="o">|</span><span class="n">node</span><span class="o">|</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="p">:</span><span class="n">private_network</span><span class="p">,</span> <span class="p">:</span><span class="n">ip</span> <span class="o">=&gt;</span> <span class="s2">&quot;10.0.0.10&quot;</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="p">:</span><span class="n">private_network</span><span class="p">,</span> <span class="p">:</span><span class="n">ip</span> <span class="o">=&gt;</span> <span class="s2">&quot;20.0.0.10&quot;</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="p">:</span><span class="n">libvirt</span> <span class="n">do</span> <span class="o">|</span><span class="n">domain</span><span class="o">|</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;qemu+unix:///system&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="s1">&#39;kvm&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;server1.example.com&quot;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">memory</span> <span class="o">=</span> <span class="mi">2048</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">cpus</span> <span class="o">=</span> <span class="mi">2</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">nested</span> <span class="o">=</span> <span class="n">true</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">volume_cache</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">storage</span> <span class="p">:</span><span class="n">file</span><span class="p">,</span> <span class="p">:</span><span class="n">size</span> <span class="o">=&gt;</span> <span class="s1">&#39;20G&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">storage</span> <span class="p">:</span><span class="n">file</span><span class="p">,</span> <span class="p">:</span><span class="n">size</span> <span class="o">=&gt;</span> <span class="s1">&#39;20G&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">storage</span> <span class="p">:</span><span class="n">file</span><span class="p">,</span> <span class="p">:</span><span class="n">size</span> <span class="o">=&gt;</span> <span class="s1">&#39;20G&#39;</span>
            <span class="n">end</span>
  <span class="n">end</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="p">:</span><span class="n">server2</span> <span class="n">do</span> <span class="o">|</span><span class="n">node</span><span class="o">|</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="p">:</span><span class="n">private_network</span><span class="p">,</span> <span class="p">:</span><span class="n">ip</span> <span class="o">=&gt;</span> <span class="s2">&quot;10.0.0.11&quot;</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="p">:</span><span class="n">private_network</span><span class="p">,</span> <span class="p">:</span><span class="n">ip</span> <span class="o">=&gt;</span> <span class="s2">&quot;20.0.0.11&quot;</span>
            <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="p">:</span><span class="n">libvirt</span> <span class="n">do</span> <span class="o">|</span><span class="n">domain</span><span class="o">|</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;qemu+unix:///system&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="s1">&#39;kvm&#39;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;server2.example.com&quot;</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">memory</span> <span class="o">=</span> <span class="mi">2048</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">cpus</span> <span class="o">=</span> <span class="mi">2</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">nested</span> <span class="o">=</span> <span class="n">true</span>
              <span class="n">domain</span><span class="o">.</span><span class="n">volume_cache</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
            <span class="n">end</span>
  <span class="n">end</span>

<span class="n">end</span>
</pre></div>
</div>
</div>
<div class="section" id="vagrant-accesss">
<h3>vagrant accesss<a class="headerlink" href="#vagrant-accesss" title="Permalink to this headline">¶</a></h3>
<p>เปิด terminal ใหม่ 2 terminal
terminal 1 ใช้  access ไปที่ server1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">vagrant</span> <span class="n">ssh</span> <span class="n">server1</span>
<span class="n">sudo</span> <span class="n">su</span> <span class="o">-</span>
<span class="n">hostnamectl</span> <span class="nb">set</span><span class="o">-</span><span class="n">hostname</span> <span class="n">server1</span>
<span class="n">hostname</span>
</pre></div>
</div>
<p>terminal 2 ใช้  access ไปที่  server2:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">vagrant</span> <span class="n">ssh</span> <span class="n">server2</span>
<span class="n">sudo</span> <span class="n">su</span> <span class="o">-</span>
<span class="n">hostnamectl</span> <span class="nb">set</span><span class="o">-</span><span class="n">hostname</span> <span class="n">server1</span>
<span class="n">hostname</span>
</pre></div>
</div>
<div class="section" id="config-team">
<h4>Config Team<a class="headerlink" href="#config-team" title="Permalink to this headline">¶</a></h4>
<p>On Server1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="c1"># yum install -y teamd</span>

<span class="o">//</span><span class="n">check</span> <span class="n">kernel</span>
<span class="c1"># modprobe team</span>
    <span class="c1"># modinfo team</span>

    <span class="n">filename</span><span class="p">:</span>       <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="mf">3.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mf">327.18</span><span class="o">.</span><span class="mf">2.</span><span class="n">el7</span><span class="o">.</span><span class="n">x86_64</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">team</span><span class="o">/</span><span class="n">team</span><span class="o">.</span><span class="n">ko</span>
    <span class="n">alias</span><span class="p">:</span>          <span class="n">rtnl</span><span class="o">-</span><span class="n">link</span><span class="o">-</span><span class="n">team</span>
    <span class="n">description</span><span class="p">:</span>    <span class="n">Ethernet</span> <span class="n">team</span> <span class="n">device</span> <span class="n">driver</span>
    <span class="n">author</span><span class="p">:</span>         <span class="n">Jiri</span> <span class="n">Pirko</span> <span class="o">&lt;</span><span class="n">jpirko</span><span class="nd">@redhat</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
    <span class="n">license</span><span class="p">:</span>        <span class="n">GPL</span> <span class="n">v2</span>
    <span class="n">rhelversion</span><span class="p">:</span>    <span class="mf">7.2</span>
    <span class="n">srcversion</span><span class="p">:</span>     <span class="n">C59FD6905408120CA7C83CD</span>
    <span class="n">depends</span><span class="p">:</span>
    <span class="n">intree</span><span class="p">:</span>         <span class="n">Y</span>
    <span class="n">vermagic</span><span class="p">:</span>       <span class="mf">3.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mf">327.18</span><span class="o">.</span><span class="mf">2.</span><span class="n">el7</span><span class="o">.</span><span class="n">x86_64</span> <span class="n">SMP</span> <span class="n">mod_unload</span> <span class="n">modversions</span>
    <span class="n">signer</span><span class="p">:</span>         <span class="n">CentOS</span> <span class="n">Linux</span> <span class="n">kernel</span> <span class="n">signing</span> <span class="n">key</span>
    <span class="n">sig_key</span><span class="p">:</span>        <span class="n">EB</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">91</span><span class="p">:</span><span class="n">DE</span><span class="p">:</span><span class="mi">1</span><span class="n">A</span><span class="p">:</span><span class="n">BE</span><span class="p">:</span><span class="n">A5</span><span class="p">:</span><span class="n">F9</span><span class="p">:</span><span class="mi">5</span><span class="n">A</span><span class="p">:</span><span class="n">A5</span><span class="p">:</span><span class="n">BC</span><span class="p">:</span><span class="n">B8</span><span class="p">:</span><span class="mi">91</span><span class="p">:</span><span class="n">E1</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">2</span><span class="n">B</span><span class="p">:</span><span class="n">ED</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">8</span><span class="n">E</span><span class="p">:</span><span class="mi">5</span><span class="n">E</span>
    <span class="n">sig_hashalgo</span><span class="p">:</span>   <span class="n">sha256</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="config">
<h3>config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>//remove config

# cd /etc/sysconfig/network-scripts/
# rm -rf ifcfg-eth1
# rm -rf ifcfg-eth2

# nmcli con show
NAME          UUID                                  TYPE            DEVICE
eth1          8a71d519-dd24-4fa3-bec2-61f0278d667b  802-3-ethernet  eth1
eth2          7856b66e-bcd9-45f6-8917-40f7e7eb4c27  802-3-ethernet  eth2
eth0          49fe963e-b0e5-4604-8745-e319f8c7e162  802-3-ethernet  eth0

//delete connection ``eth1``  ``eth2``

    # nmcli con del 8a71d519-dd24-4fa3-bec2-61f0278d667b
    # nmcli con del 7856b66e-bcd9-45f6-8917-40f7e7eb4c27
    # nmcli c s

    NAME         UUID                                  TYPE            DEVICE
    eth0         81208c98-cfc3-4a14-9595-0eb2f54a7966  802-3-ethernet  eth0
    System eth0  5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03  802-3-ethernet  --
</pre></div>
</div>
<p>Create connection ชนิด team  ชื่อ myteam0  พร้อมกับการสร้าง interface ใหม่ ชื่อ team0</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>      <span class="o">//</span><span class="n">สร้าง</span> <span class="n">team</span>
    <span class="c1"># nmcli con add type team con-name team0 ifname team0 config &#39;{ &quot;runner&quot;: {&quot;name&quot;: &quot;loadbalance&quot;}}&#39;</span>
    <span class="n">Connection</span> <span class="s1">&#39;myteam0&#39;</span> <span class="p">(</span><span class="n">bc60cf30</span><span class="o">-</span><span class="n">a296</span><span class="o">-</span><span class="mi">44</span><span class="n">b5</span><span class="o">-</span><span class="mi">8157</span><span class="o">-</span><span class="n">dceabe7a06c7</span><span class="p">)</span> <span class="n">successfully</span> <span class="n">added</span><span class="o">.</span>

     <span class="o">//</span><span class="n">สร้างให้เองอัตโนมัติ</span>
<span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysconfig</span><span class="o">/</span><span class="n">network</span><span class="o">-</span><span class="n">scripts</span><span class="o">/</span><span class="n">ifcfg</span><span class="o">-</span><span class="n">myteam0</span>

    <span class="n">DEVICE</span><span class="o">=</span><span class="n">team0</span>
    <span class="n">TEAM_CONFIG</span><span class="o">=</span><span class="s2">&quot;{ </span><span class="se">\&quot;</span><span class="s2">runner</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">name</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">loadbalance</span><span class="se">\&quot;</span><span class="s2">}}&quot;</span>
    <span class="n">DEVICETYPE</span><span class="o">=</span><span class="n">Team</span>
    <span class="n">BOOTPROTO</span><span class="o">=</span><span class="n">dhcp</span>
    <span class="n">DEFROUTE</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">PEERDNS</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">PEERROUTES</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV4_FAILURE_FATAL</span><span class="o">=</span><span class="n">no</span>
    <span class="n">IPV6INIT</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV6_AUTOCONF</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV6_DEFROUTE</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV6_PEERDNS</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV6_PEERROUTES</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">IPV6_FAILURE_FATAL</span><span class="o">=</span><span class="n">no</span>
    <span class="n">NAME</span><span class="o">=</span><span class="n">team0</span>
    <span class="n">UUID</span><span class="o">=</span><span class="n">bc60cf30</span><span class="o">-</span><span class="n">a296</span><span class="o">-</span><span class="mi">44</span><span class="n">b5</span><span class="o">-</span><span class="mi">8157</span><span class="o">-</span><span class="n">dceabe7a06c7</span>
    <span class="n">ONBOOT</span><span class="o">=</span><span class="n">yes</span>

    <span class="o">//</span><span class="n">กำหนด</span> <span class="n">ip</span>
    <span class="c1"># nmcli con mod team0 ipv4.addresses 10.0.0.10/24</span>
    <span class="c1"># nmcli con mod team0 ipv4.gateway 10.0.0.1</span>
    <span class="c1"># nmcli con mod team0 ipv4.method manual</span>

    <span class="o">//</span><span class="n">เพิ่ม</span>  <span class="n">eth1</span> <span class="n">ให้เป็น</span> <span class="n">team</span> <span class="n">interface</span> <span class="n">ชนิด</span>  <span class="n">team</span><span class="o">-</span><span class="n">slave</span> <span class="n">ของinterface</span> <span class="n">team0</span> <span class="n">มีชื่อว่า</span> <span class="n">team0</span><span class="o">-</span><span class="n">slave0</span>
    <span class="c1"># nmcli con add type team-slave con-name team0-slave0 ifname eth1 master team0</span>
    <span class="n">Connection</span> <span class="s1">&#39;team0-slave0&#39;</span> <span class="p">(</span><span class="mi">329</span><span class="n">c1ff0</span><span class="o">-</span><span class="n">d674</span><span class="o">-</span><span class="mi">46</span><span class="n">aa</span><span class="o">-</span><span class="mi">9</span><span class="n">bd5</span><span class="o">-</span><span class="mi">7</span><span class="n">af1b60d5327</span><span class="p">)</span> <span class="n">successfully</span> <span class="n">added</span><span class="o">.</span>

    <span class="o">//</span><span class="n">เพิ่ม</span>  <span class="n">eth2</span> <span class="n">ให้เป็น</span> <span class="n">team</span> <span class="n">interface</span> <span class="n">ชนิด</span>  <span class="n">team</span><span class="o">-</span><span class="n">slave</span> <span class="n">ของinterface</span> <span class="n">team0</span> <span class="n">มีชื่อว่า</span> <span class="n">team0</span><span class="o">-</span><span class="n">slave1</span>
    <span class="c1"># nmcli con add type team-slave con-name team0-slave1 ifname eth2 master team0</span>
    <span class="n">Connection</span> <span class="s1">&#39;team0-slave1&#39;</span> <span class="p">(</span><span class="n">eb9e1180</span><span class="o">-</span><span class="n">d8d3</span><span class="o">-</span><span class="mi">4</span><span class="n">abe</span><span class="o">-</span><span class="n">a88e</span><span class="o">-</span><span class="mi">42</span><span class="n">ffe1c8f72b</span><span class="p">)</span> <span class="n">successfully</span> <span class="n">added</span><span class="o">.</span>

     <span class="o">//</span><span class="n">โดยที่</span> <span class="n">nmcli</span> <span class="n">จะสร้าง</span> <span class="n">config</span> <span class="n">ให้แก่</span>  <span class="n">connection</span> <span class="n">ทั้ง</span> <span class="n">team0</span><span class="o">-</span><span class="n">slave0</span> <span class="n">และ</span> <span class="n">team0</span><span class="o">-</span><span class="n">slave1</span>

<span class="c1"># cat /etc/sysconfig/network-scripts/ifcfg-team0-slave0</span>
    <span class="n">NAME</span><span class="o">=</span><span class="n">team0</span><span class="o">-</span><span class="n">slave0</span>
    <span class="n">UUID</span><span class="o">=</span><span class="mi">329</span><span class="n">c1ff0</span><span class="o">-</span><span class="n">d674</span><span class="o">-</span><span class="mi">46</span><span class="n">aa</span><span class="o">-</span><span class="mi">9</span><span class="n">bd5</span><span class="o">-</span><span class="mi">7</span><span class="n">af1b60d5327</span>
    <span class="n">DEVICE</span><span class="o">=</span><span class="n">eth1</span>
    <span class="n">ONBOOT</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">TEAM_MASTER</span><span class="o">=</span><span class="n">team0</span>
    <span class="n">DEVICETYPE</span><span class="o">=</span><span class="n">TeamPort</span>

    <span class="c1"># cat /etc/sysconfig/network-scripts/ifcfg-team0-slave1</span>
    <span class="n">NAME</span><span class="o">=</span><span class="n">team0</span><span class="o">-</span><span class="n">slave1</span>
    <span class="n">UUID</span><span class="o">=</span><span class="n">eb9e1180</span><span class="o">-</span><span class="n">d8d3</span><span class="o">-</span><span class="mi">4</span><span class="n">abe</span><span class="o">-</span><span class="n">a88e</span><span class="o">-</span><span class="mi">42</span><span class="n">ffe1c8f72b</span>
    <span class="n">DEVICE</span><span class="o">=</span><span class="n">eth2</span>
    <span class="n">ONBOOT</span><span class="o">=</span><span class="n">yes</span>
    <span class="n">TEAM_MASTER</span><span class="o">=</span><span class="n">team0</span>
    <span class="n">DEVICETYPE</span><span class="o">=</span><span class="n">TeamPort</span>
</pre></div>
</div>
</div>
<div class="section" id="activate-team">
<h3>Activate Team<a class="headerlink" href="#activate-team" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="c1"># nmcli con up team0</span>
    <span class="n">Connection</span> <span class="n">successfully</span> <span class="n">activated</span> <span class="p">(</span><span class="n">D</span><span class="o">-</span><span class="n">Bus</span> <span class="n">active</span> <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">org</span><span class="o">/</span><span class="n">freedesktop</span><span class="o">/</span><span class="n">NetworkManager</span><span class="o">/</span><span class="n">ActiveConnection</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>

    <span class="c1"># nmcli c s</span>
    <span class="n">NAME</span>          <span class="n">UUID</span>                                  <span class="n">TYPE</span>            <span class="n">DEVICE</span>
    <span class="n">eth0</span>          <span class="mi">49</span><span class="n">fe963e</span><span class="o">-</span><span class="n">b0e5</span><span class="o">-</span><span class="mi">4604</span><span class="o">-</span><span class="mi">8745</span><span class="o">-</span><span class="n">e319f8c7e162</span>  <span class="mi">802</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">ethernet</span>  <span class="n">eth0</span>
    <span class="n">team0</span>         <span class="mi">3</span><span class="n">c59a2f2</span><span class="o">-</span><span class="mi">5</span><span class="n">cb4</span><span class="o">-</span><span class="mi">47</span><span class="n">a7</span><span class="o">-</span><span class="mi">8593</span><span class="o">-</span><span class="n">f0c683d66c28</span>  <span class="n">team</span>            <span class="n">team0</span>
    <span class="n">team0</span><span class="o">-</span><span class="n">slave0</span>  <span class="mi">329</span><span class="n">c1ff0</span><span class="o">-</span><span class="n">d674</span><span class="o">-</span><span class="mi">46</span><span class="n">aa</span><span class="o">-</span><span class="mi">9</span><span class="n">bd5</span><span class="o">-</span><span class="mi">7</span><span class="n">af1b60d5327</span>  <span class="mi">802</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">ethernet</span>  <span class="n">eth1</span>
    <span class="n">team0</span><span class="o">-</span><span class="n">slave1</span>  <span class="n">eb9e1180</span><span class="o">-</span><span class="n">d8d3</span><span class="o">-</span><span class="mi">4</span><span class="n">abe</span><span class="o">-</span><span class="n">a88e</span><span class="o">-</span><span class="mi">42</span><span class="n">ffe1c8f72b</span>  <span class="mi">802</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">ethernet</span>  <span class="n">eth2</span>
    <span class="n">myteam0</span>       <span class="n">bc60cf30</span><span class="o">-</span><span class="n">a296</span><span class="o">-</span><span class="mi">44</span><span class="n">b5</span><span class="o">-</span><span class="mi">8157</span><span class="o">-</span><span class="n">dceabe7a06c7</span>  <span class="n">team</span>            <span class="o">--</span>
    <span class="n">System</span> <span class="n">eth0</span>   <span class="mi">5</span><span class="n">fb06bd0</span><span class="o">-</span><span class="mi">0</span><span class="n">bb0</span><span class="o">-</span><span class="mi">7</span><span class="n">ffb</span><span class="o">-</span><span class="mi">45</span><span class="n">f1</span><span class="o">-</span><span class="n">d6edd65f3e03</span>  <span class="mi">802</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">ethernet</span>  <span class="o">--</span>

    <span class="c1"># teamdctl team0 state</span>

<span class="c1"># teamdctl team0 config dump</span>

    <span class="n">setup</span><span class="p">:</span>
      <span class="n">runner</span><span class="p">:</span> <span class="n">loadbalance</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="n">eth2</span>
            <span class="n">link</span> <span class="n">watches</span><span class="p">:</span>
              <span class="n">link</span> <span class="n">summary</span><span class="p">:</span> <span class="n">up</span>
              <span class="n">instance</span><span class="p">[</span><span class="n">link_watch_0</span><span class="p">]:</span>
                <span class="n">name</span><span class="p">:</span> <span class="n">ethtool</span>
                <span class="n">link</span><span class="p">:</span> <span class="n">up</span>
                <span class="n">down</span> <span class="n">count</span><span class="p">:</span> <span class="mi">0</span>
      <span class="n">eth1</span>
            <span class="n">link</span> <span class="n">watches</span><span class="p">:</span>
              <span class="n">link</span> <span class="n">summary</span><span class="p">:</span> <span class="n">up</span>
              <span class="n">instance</span><span class="p">[</span><span class="n">link_watch_0</span><span class="p">]:</span>
                <span class="n">name</span><span class="p">:</span> <span class="n">ethtool</span>
                <span class="n">link</span><span class="p">:</span> <span class="n">up</span>
                <span class="n">down</span> <span class="n">count</span><span class="p">:</span> <span class="mi">0</span>

    <span class="o">//</span><span class="n">check</span> <span class="n">port</span> <span class="n">status</span>
    <span class="c1"># teamnl team0 ports</span>
     <span class="mi">4</span><span class="p">:</span> <span class="n">eth2</span><span class="p">:</span> <span class="n">up</span> <span class="mi">0</span><span class="n">Mbit</span> <span class="n">HD</span>
     <span class="mi">3</span><span class="p">:</span> <span class="n">eth1</span><span class="p">:</span> <span class="n">up</span> <span class="mi">0</span><span class="n">Mbit</span> <span class="n">HD</span>

<span class="c1">#nmcli con reload</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lvm.html" class="btn btn-neutral float-right" title="Linux LVM partition" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ovs.html" class="btn btn-neutral" title="OpenVswitch Bridge" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, sawangpong muadphet &lt;sawangpong@itbakery.net&gt;.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'latest',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>